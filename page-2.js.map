{"version":3,"file":"page-2.js","sources":["../src/js/1-gallery.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst searchInput = document.querySelector('.search__input');\nconst searchButton = document.querySelector('button');\nconst baseUrl = 'https://pixabay.com/api/';\nconst apiKey = '51405518-123002757a861b136415ef994';\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more');\nconst perPage = 40;\nlet page = 1;\nconst heightOfGalleryItem = gallery.getBoundingClientRect().height;\n\nloader.style.display = 'none';\nloadMoreButton.style.display = 'none';\nsearchButton.addEventListener('click', () => {\n  const query = searchInput.value.trim();\n  if (query) {\n    fetchImages(query);\n  } else {\n    alert('Please enter a search term.');\n  }\n});\n\nconst fetchImages = async query => {\n  page = 1;\n  loader.style.display = 'block';\n  const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safe_search=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n    if (data.hits.length === 0) {\n      loader.style.display = 'none';\n      iziToast.error({\n        title: 'No results found',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n    gallery.innerHTML = data.hits\n      .map(\n        hit => `\n                <div class=\"gallery__item\">\n                    <a href=\"${hit.largeImageURL}\" class=\"gallery__item\">\n                        <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery__image\" />\n                    </a>\n                    <div class=\"gallery__info\">\n                        <p class=\"gallery__info_item\"><b>Likes</b> ${hit.likes}</p>\n                        <p class=\"gallery__info_item\"><b>Views</b> ${hit.views}</p>\n                        <p class=\"gallery__info_item\"><b>Comments</b> ${hit.comments}</p>\n                        <p class=\"gallery__info_item\"><b>Downloads</b> ${hit.downloads}</p>\n                    </div>\n                </div>\n                `\n      )\n      .join('');\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      scrollZoom: false,\n    });\n    loader.style.display = 'none';\n    lightbox.refresh();\n    // Show load more button if there are more images to load\n    if (data.totalHits > perPage) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error fetching images',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n};\n\nconst loadMoreImages = async query => {\n  loader.style.display = 'block';\n  const url = `${baseUrl}?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safe_search=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n    if (data.hits.length === 0) {\n      iziToast.info({\n        title: 'No more images',\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n      loadMoreButton.style.display = 'none';\n      loader.style.display = 'none';\n      return;\n    }\n    gallery.insertAdjacentHTML(\n      'beforeend',\n      data.hits\n        .map(\n          hit => `\n                    <div class=\"gallery__item\">\n                        <a href=\"${hit.largeImageURL}\" class=\"gallery__item\">\n                            <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery__image\" />\n                        </a>\n                        <div class=\"gallery__info\">\n                            <p class=\"gallery__info_item\"><b>Likes</b> ${hit.likes}</p>\n                            <p class=\"gallery__info_item\"><b>Views</b> ${hit.views}</p>\n                            <p class=\"gallery__info_item\"><b>Comments</b> ${hit.comments}</p>\n                            <p class=\"gallery__info_item\"><b>Downloads</b> ${hit.downloads}</p>\n                        </div>\n                    </div>\n                `\n        )\n        .join('')\n    );\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      scrollZoom: false,\n    });\n    const { height: cardHeight } =\n      gallery.firstElementChild?.getBoundingClientRect() || { height: 0 };\n    window.scrollBy({\n      top: cardHeight * 2 - 20, \n      behavior: 'smooth',\n    });\n\n    loader.style.display = 'none';\n    lightbox.refresh();\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error fetching more images',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n};\n\nloadMoreButton.addEventListener('click', () => {\n  const query = searchInput.value.trim();\n  if (query) {\n    loadMoreImages(query);\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term before loading more images.',\n      position: 'topRight',\n    });\n  }\n  page++;\n});\n"],"names":["searchInput","searchButton","baseUrl","apiKey","gallery","loader","loadMoreButton","perPage","page","query","fetchImages","url","data","axios","iziToast","hit","lightbox","SimpleLightbox","error","loadMoreImages","cardHeight","_a"],"mappings":"kHAMA,MAAMA,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAe,SAAS,cAAc,QAAQ,EAC9CC,EAAU,2BACVC,EAAS,qCACTC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAU,GAChB,IAAIC,EAAO,EACiBJ,EAAQ,sBAAuB,EAAC,OAE5DC,EAAO,MAAM,QAAU,OACvBC,EAAe,MAAM,QAAU,OAC/BL,EAAa,iBAAiB,QAAS,IAAM,CAC3C,MAAMQ,EAAQT,EAAY,MAAM,KAAI,EAChCS,EACFC,EAAYD,CAAK,EAEjB,MAAM,6BAA6B,CAEvC,CAAC,EAED,MAAMC,EAAc,MAAMD,GAAS,CACjCD,EAAO,EACPH,EAAO,MAAM,QAAU,QACvB,MAAMM,EAAM,GAAGT,CAAO,QAAQC,CAAM,MAAM,mBACxCM,CACD,CAAA,kEAAkED,CAAI,aAAaD,CAAO,GAE3F,GAAI,CAEF,MAAMK,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KACtB,GAAIC,EAAK,KAAK,SAAW,EAAG,CAC1BP,EAAO,MAAM,QAAU,OACvBS,EAAS,MAAM,CACb,MAAO,mBACP,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CACDV,EAAQ,UAAYQ,EAAK,KACtB,IACCG,GAAO;AAAA;AAAA,+BAEgBA,EAAI,aAAa;AAAA,oCACZA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,qEAGDA,EAAI,KAAK;AAAA,qEACTA,EAAI,KAAK;AAAA,wEACNA,EAAI,QAAQ;AAAA,yEACXA,EAAI,SAAS;AAAA;AAAA;AAAA,iBAI/E,EACA,KAAK,EAAE,EACV,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,WAAY,EAClB,CAAK,EACDZ,EAAO,MAAM,QAAU,OACvBW,EAAS,QAAO,EAEZJ,EAAK,UAAYL,EACnBD,EAAe,MAAM,QAAU,QAE/BA,EAAe,MAAM,QAAU,MAElC,OAAQY,EAAO,CACdb,EAAO,MAAM,QAAU,OACvBS,EAAS,MAAM,CACb,MAAO,wBACP,QAASI,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,EAEMC,EAAiB,MAAMV,GAAS,OACpCJ,EAAO,MAAM,QAAU,QACvB,MAAMM,EAAM,GAAGT,CAAO,QAAQC,CAAM,MAAM,mBACxCM,CACD,CAAA,kEAAkED,CAAI,aAAaD,CAAO,GAE3F,GAAI,CAEF,MAAMK,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KACtB,GAAIC,EAAK,KAAK,SAAW,EAAG,CAC1BE,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACT,SAAU,UAClB,CAAO,EACDR,EAAe,MAAM,QAAU,OAC/BD,EAAO,MAAM,QAAU,OACvB,MACD,CACDD,EAAQ,mBACN,YACAQ,EAAK,KACF,IACCG,GAAO;AAAA;AAAA,mCAEkBA,EAAI,aAAa;AAAA,wCACZA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,yEAGDA,EAAI,KAAK;AAAA,yEACTA,EAAI,KAAK;AAAA,4EACNA,EAAI,QAAQ;AAAA,6EACXA,EAAI,SAAS;AAAA;AAAA;AAAA,iBAIjF,EACA,KAAK,EAAE,CAChB,EACI,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,WAAY,EAClB,CAAK,EACK,CAAE,OAAQG,CAAY,IAC1BC,EAAAjB,EAAQ,oBAAR,YAAAiB,EAA2B,0BAA2B,CAAE,OAAQ,CAAC,EACnE,OAAO,SAAS,CACd,IAAKD,EAAa,EAAI,GACtB,SAAU,QAChB,CAAK,EAEDf,EAAO,MAAM,QAAU,OACvBW,EAAS,QAAO,CACjB,OAAQE,EAAO,CACdb,EAAO,MAAM,QAAU,OACvBS,EAAS,MAAM,CACb,MAAO,6BACP,QAASI,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,EAEAZ,EAAe,iBAAiB,QAAS,IAAM,CAC7C,MAAMG,EAAQT,EAAY,MAAM,KAAI,EAChCS,EACFU,EAAeV,CAAK,EAEpBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yDACT,SAAU,UAChB,CAAK,EAEHN,GACF,CAAC"}